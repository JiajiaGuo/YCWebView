#### 下载





### 16.使用外部浏览器下载
- 比如，打开一个h5的链接，遇到下载链接，即跳转到外部浏览器打开；其他的则在webView中打开。如何操作呢？代码如下所示：
    ```
    private class MyX5WebViewClient extends X5WebViewClient {
        public MyX5WebViewClient(X5WebView webView, Context context) {
            super(webView, context);
        }
    
        @Override
        public boolean shouldOverrideUrlLoading(WebView webView, String url) {
            //返回值是true的时候控制去WebView打开，为false调用系统浏览器或第三方浏览器
            boolean activityAlive = X5WebUtils.isActivityAlive(WebViewActivity.this);
            if (!activityAlive){
                return false;
            }
            if (TextUtils.isEmpty(url)) {
                return false;
            }
            try {
                url = URLDecoder.decode(url, "UTF-8");
            } catch (UnsupportedEncodingException ex) {
                ex.printStackTrace();
            }
            //如果是返回数据
            if (url.contains(".apk")) {
                //为false调用系统浏览器或第三方浏览器
                Uri issuesUrl = Uri.parse(url);
                Intent intent = new Intent(Intent.ACTION_VIEW, issuesUrl);
                WebViewActivity.this.startActivity(intent);
                return false;
            }else {
                mWebView.loadUrl(url);
                return true;
            }
            //return super.shouldOverrideUrlLoading(webView, url);
        }
    
        @Override
        public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request) {
            //返回值是true的时候控制去WebView打开，为false调用系统浏览器或第三方浏览器
            boolean activityAlive = X5WebUtils.isActivityAlive(WebViewActivity.this);
            if (!activityAlive){
                return false;
            }
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
                String url = request.getUrl().toString();
                if (TextUtils.isEmpty(url)) {
                    return false;
                }
                try {
                    url = URLDecoder.decode(url, "UTF-8");
                } catch (UnsupportedEncodingException ex) {
                    ex.printStackTrace();
                }
                //如果是返回数据
                if (url.contains(".apk")) {
                    //为false调用系统浏览器或第三方浏览器
                    Uri issuesUrl = Uri.parse(url);
                    Intent intent = new Intent(Intent.ACTION_VIEW, issuesUrl);
                    WebViewActivity.this.startActivity(intent);
                    return false;
                }else {
                    mWebView.loadUrl(url);
                    return true;
                }
            }else {
                return super.shouldOverrideUrlLoading(webView, request);
            }
        }
    }
    ```





- https://www.jianshu.com/p/6e38e1ef203a





