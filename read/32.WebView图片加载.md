#### 基础使用目录介绍
- 51.关于图片显示隐藏设置



### 51.关于图片显示隐藏设置
- 方法一：
    - 无图模式
        ```
        mWebView.getSettings().setLoadsImagesAutomatically(boolean enable);
        mWebView.getSettings().setBlockNetworkImage(boolean enable);
        ```
    - 有图：正常加载显示所有图片
        ```
        mWebView.getSettings().setLoadsImagesAutomatically(true)
        mWebView.getSettings().setBlockNetworkImage(false)
        ```
    - 始终无图：所有图片都不显示
        ```
        mWebView.getSettings().setLoadsImagesAutomatically(false)
        mWebView.getSettings().setBlockNetworkImage(true)
        ```
    - 注：如果是先加载的网页图片，后设置的始终无图，则已加载的图片正常显示
    - 数据网络无图
        ```
        mWebView.getSettings().setLoadsImagesAutomatically(true)
        mWebView.getSettings().setBlockNetworkImage(true)
        ```
        - 注：wifi网络，与有图模式一致；数据网络下，已经下载到缓存的图片正常显示，未下载到缓存的图片不去网络请求显示。
- 方法二：（新版sdk新加接口，如果在用的sdk中没有该接口需要更新sdk） 设置接口如下：
    ```
    mWebView.getSettingsExtension().setPicModel(model);//其中model位于IX5WebSettingsExtension中
    ```
    - 有图：model设置为IX5WebSettingsExtension.PicModel_NORMAL正常加载显示所有图片； 
    - 始终无图：model设置为IX5WebSettingsExtension.PicModel_NoPic不再显示图片（包括已加载出的图片）； 
    - 数据网络无图：model设置为IX5WebSettingsExtension.PicModel_NetNoPic数据网络下无图（已加载的图片正常显示）；



### 5.0.2 加载webView中的资源时，加快加载的速度优化，主要是针对图片
- html代码下载到WebView后，webkit开始解析网页各个节点，发现有外部样式文件或者外部脚本文件时，会异步发起网络请求下载文件，但如果在这之前也有解析到image节点，那势必也会发起网络请求下载相应的图片。
- 在网络情况较差的情况下，过多的网络请求就会造成带宽紧张，影响到css或js文件加载完成的时间，造成页面空白loading过久。解决的方法就是告诉WebView先不要自动加载图片，等页面finish后再发起图片加载。
    ```
    //初始化的时候设置，具体代码在X5WebView类中
    if(Build.VERSION.SDK_INT >= KITKAT) {
        //设置网页在加载的时候暂时不加载图片
        ws.setLoadsImagesAutomatically(true);
    } else {
        ws.setLoadsImagesAutomatically(false);
    }
    
    /**
     * 当页面加载完成会调用该方法
     * @param view                              view
     * @param url                               url链接
     */
    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        //页面finish后再发起图片加载
        if(!webView.getSettings().getLoadsImagesAutomatically()) {
            webView.getSettings().setLoadsImagesAutomatically(true);
        }
    }
    ```

